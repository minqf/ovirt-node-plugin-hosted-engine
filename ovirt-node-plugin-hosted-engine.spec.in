%global product_family oVirt Node
%define recipe_root %{_datadir}/ovirt-node-recipe

Name:           ovirt-node-plugin-hosted-engine
Version:        0.0.1
Release:        0.999%{?BUILD_NUMBER}%{?extra_release}%{?dist}
Source0:        %{name}-%{version}.tar.gz
License:        GPLv2+
Group:          Applications/System
Summary:        Hosted Engine plugin for %{product_family} image
Requires:       ovirt-hosted-engine-setup
Requires:       screen


%package recipe
Summary:        Kickstarts for building oVirt Node isos including %{name}
Group:          Applications/System
Requires:       ovirt-node-recipe >= 2.6.0


%post
chkconfig ovirt-ha-agent on
chkconfig ovirt-ha-broker on

%description
This package provides a hosted engine plugin for use with%{product_family} image.

%description recipe
Provides kickstart files for generating an oVirt Node ISO image containing
%{name}.


%files
%{python_sitelib}/ovirt/node/setup/hostedengine/__init__.py*
%{python_sitelib}/ovirt/node/setup/hostedengine/hosted_engine_page.py*

BuildArch:      noarch
BuildRequires:  python2-devel


%prep
%setup -q


%build
%configure

%install
%{__rm} -rf %{buildroot}
make install DESTDIR=%{buildroot}


%files
%{python_sitelib}/ovirt/node/setup/hostedengine
#%{_sysconfdir}/ovirt-plugins.d

%files recipe
%{recipe_root}

%changelog
* Tue May 27 2014 Joey Boggs <jboggs@redhat.com> 0.0.1
- initial commit
